<?xml version="1.0"?>
<testCase version="8.1.0.201912080816">
    <general>
        <sessionClass includeTestCase="true" sessionType="Abacus_tclsh_base.ffsp"/>
    </general>
    <procedures>
        <item name="main">
            <steps>
                <item guid="ccda6405-081c-41b8-b78a-a80f3b9c888f" action="comment" useFieldsInCommand="false">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="ChangeCallerID" isPublic="true" isVBlock="true">
            <description>Change Caller ID</description>
            <steps>
                <item guid="0c517d4c-45e1-46fe-9cf5-882bf87e5798" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Add country code to beginning of number</body>
                    </command>
                    <nestedSteps>
                        <item guid="e82de767-6e52-4dab-b10a-a31b5ef3e413" action="if" useFieldsInCommand="false">
                            <command>
                                <body>[string index $phone_num 0] != 1</body>
                            </command>
                            <nestedSteps>
                                <item guid="dab15df8-b593-484c-926e-eef316f9c9c0" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="1c691c05-61b4-41e1-a8cc-88da48d26bef" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set phone_num &quot;1$phone_num&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="fbb5a8b6-df7e-4772-b14d-d7c3acf39bfc" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Change &quot;Own&quot; phonebook</body>
                    </command>
                    <nestedSteps>
                        <item guid="c422fa47-f9d9-4bae-8701-b569c580f788" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Get current &quot;Own&quot; phonebook</body>
                            </command>
                            <nestedSteps>
                                <item guid="d094f59e-c433-47a7-9ddc-7b07c2fd0bb2" action="command" session="$session" useFieldsInCommand="false">
                                    <command>
                                        <body>epdb GetPhoneBookBySet &quot;EANALOG&quot; &quot;Subscriber&quot; 1 &quot;Own&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>current_config</storeResponseAt>
                                        <storeResponseText>true</storeResponseText>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="2d9c2b53-e66b-40b5-97f3-4324eaca99ff" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Build new XML</body>
                            </command>
                            <nestedSteps>
                                <item guid="e68d9f3e-00c3-4a68-bed6-345409cba00a" action="comment" useFieldsInCommand="false" skippReporting="false">
                                    <command>
                                        <body>Loop through lines looking for account to change by phone number</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="64358a2b-2464-411f-a5f2-66a2cdae8c5d" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set config_lines [split $current_config \\n]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="e96ab3f4-c184-42c5-a71f-89af86fad2dd" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set new_config &quot;[lindex $current_config 0]\\n&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="833b42ba-8b16-449b-8b7d-b0e7188a2796" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>{set i 1} {$i &lt; [llength $config_lines]} {incr i} </body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="1c9245ee-fdf8-4425-9b54-e6c85a3e1cc2" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set line &quot;[lindex $config_lines $i]&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="1aed2b64-116b-478e-b5fc-3d3d5fb98bb8" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Search for phone number </body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="2cf62862-b9f2-4502-b427-c1c8d2a5132a" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>[regexp  &quot;^Phone=$phone_num&quot; $line] == 1</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="db8009e6-5ac7-4b44-876b-5c4f8b37f6a7" action="then" useFieldsInCommand="false">
                                                                    <nestedSteps>
                                                                        <item guid="f0e0d7a4-0030-45ac-a956-f9d916284044" action="comment" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>If current line contains desired phone number, replace the corresponding CID name line</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="be27dcca-6ff9-441c-bd17-9b83f44e0e67" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>If new CID number is set, create new line. If not, grab exisiting line containg CID number</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="c2686504-bfed-47a6-b9be-877c74943bce" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>$cid_number != &quot;&quot;</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="4c2d052b-5178-473b-8c1e-bf48c624299a" action="then" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="079caa0c-1bd9-40cf-87f5-a32da22f8405" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Create line with new CID number</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="dbd2b1a9-f830-4f16-9c14-57bbe770aea4" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_number_line &quot;CID Phone=$cid_number&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="466eb341-91dd-429d-b080-f4730e306c21" action="else" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="c27fdf4a-65ee-437d-a855-6b7dcbbf6213" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Grab line with existing CID number</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="328fea51-5bc1-4a9d-80c3-7b370fe91ad3" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_number_line [lindex $config_lines [expr $i + 1]]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="df052c57-b7d9-4a8b-92e5-95e061200427" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>If new CID name is set, create new line. If not, grab exisiting line containg CID name</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="5587249b-0f00-4db8-a9c6-a52f5c796c1d" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>$cid_name != &quot;&quot;</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="42eb6351-4440-4f34-92bf-d4192cde106a" action="then" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="bc5e7be8-eb4f-4bad-84e9-eae97794d13d" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Create line with new CID name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="68b73d6d-55a0-417e-bbb2-71a9701d6bf4" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_name_line &quot;CID Name=$cid_name&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="90f9645c-2118-4e4a-acdb-df9d634d03a5" action="else" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="cdee8bbb-b241-4f0d-b791-5b49fb6148a1" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Grab line with existing CID number</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="8ca28844-ddb7-4e24-af5d-d4a16e50f0a9" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_name_line [lindex $config_lines [expr $i + 2]]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="280b2ecb-4c29-494d-8b3a-00e2bdea7369" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Copy lines to new config variable</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="15180373-8bbe-45ae-ab1b-fb4efd631a94" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set new_config &quot;$new_config$line\\n&quot;</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="ddcb1374-6e3d-4c2d-9b7f-b0c63af82658" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set new_config &quot;$new_config$cid_number_line\\n&quot;</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="079f4c46-5ff2-469d-baa2-0a9a3685fd8a" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set new_config &quot;$new_config$cid_name_line\\n&quot;</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="e0e1b68c-7e60-4926-8e0e-d40733f5d074" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Increment i to skip over these lines</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="5c82f006-6be4-47c0-9f1e-e815893706d9" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set i [expr $i + 2]</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="b84b3adb-76ea-4fa6-bd45-b15962f8ed6b" action="else" useFieldsInCommand="false">
                                                                    <nestedSteps>
                                                                        <item guid="daaed3d1-9e14-44e0-9388-a7e90c684f5e" action="comment" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>If current line does not contain desired phone number copy line to new XML</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="e8b0ce82-b55c-4e9e-ad5d-ce651dd8fe10" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>set new_config &quot;$new_config$line\\n&quot;</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b0f8c9aa-17ab-4b9a-a923-d4dcb0e21858" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Commit changes</body>
                            </command>
                            <nestedSteps>
                                <item guid="5730398a-8019-4972-a931-4993f103cbd6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts $new_config</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>new_xml</storeResponseAt>
                                        <storeResponseText>true</storeResponseText>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="2ac5de2b-3e1d-4f12-90be-9f2305303bc6" action="command" session="$session">
                                    <command>
                                        <body>epdb SetPhoneBookBySet &quot;EANALOG&quot; &quot;Subscriber&quot; &quot;1&quot; &quot;Own&quot; {$new_config}</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>own_status</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="fd4cce5e-94f6-41dd-b68e-24eb46697cc6" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Change &quot;External&quot; phonebook</body>
                    </command>
                    <nestedSteps>
                        <item guid="31f9dcb7-dc3a-4f02-b542-3f50be05372c" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Get current &quot;External&quot; phonebook</body>
                            </command>
                            <nestedSteps>
                                <item guid="e899cc25-fd75-4387-8adf-aa697b3ec04c" action="command" session="$session" useFieldsInCommand="false">
                                    <command>
                                        <body>epdb GetPhoneBookBySet &quot;EANALOG&quot; &quot;Subscriber&quot; 1 &quot;External&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>current_config</storeResponseAt>
                                        <storeResponseText>true</storeResponseText>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="35fe46e2-e84b-4e54-a8d5-ae581299cf19" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Build new XML</body>
                            </command>
                            <nestedSteps>
                                <item guid="f5600288-50ac-4868-b497-a8fe00f79e9a" action="comment" useFieldsInCommand="false" skippReporting="false">
                                    <command>
                                        <body>Loop through lines looking for account to change by phone number</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="197f3620-6b98-47c1-bf81-2b8e35b59231" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set config_lines [split $current_config \\n]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="f9766eb6-9446-46d7-a1d4-741bc2230e2e" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set new_config &quot;[lindex $current_config 0]\\n&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="ee5558be-3206-4b2c-bab4-3aff5337ec67" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>{set i 1} {$i &lt; [llength $config_lines]} {incr i} </body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="787f64df-729c-426f-9b9e-3c064eb58c19" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set line &quot;[lindex $config_lines $i]&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="760d765d-36d8-4d9a-862e-c41ef4000f75" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Search for phone number </body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="c7b08770-48ef-45a1-97b3-551bf2c6983c" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>[regexp  &quot;^Phone=$phone_num&quot; $line] == 1</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="7b914ba6-0be5-4a2d-9ec5-d402f18825a8" action="then" useFieldsInCommand="false">
                                                                    <nestedSteps>
                                                                        <item guid="d8207424-7907-4f0c-9d94-c4d271fb1a5a" action="comment" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>If current line contains desired phone number, replace the corresponding CID name line</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="fd4142d9-fe14-4e56-8780-78e1d5b9b7bb" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>If new CID number is set, create new line. If not, grab exisiting line containg CID number</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="121259c7-244c-41e5-be9f-f4c9d3c8f3fc" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>$cid_number != &quot;&quot;</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="01743dda-06bb-47ba-9fe7-3d0736a8ec8f" action="then" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="3e2cc40e-b9ec-481b-a94f-995efded95e1" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Create line with new CID number</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="bb7bb5c3-91fd-4996-b45b-3498710fa5d9" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_number_line &quot;CID Phone=$cid_number&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="492025ea-6577-421c-8137-447bdbc6c655" action="else" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="fbe21a02-d9a8-489e-9bd1-104184e46645" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Grab line with existing CID number</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="cbd42db0-6cde-4f49-ab8e-d1029435dd93" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_number_line [lindex $config_lines [expr $i + 1]]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="82c3ea26-9ced-4731-b780-756452f2a059" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>If new CID name is set, create new line. If not, grab exisiting line containg CID name</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="e85b0166-0fd1-4924-ae9d-c0c6a97b8da1" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>$cid_name != &quot;&quot;</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="177968de-743f-49a9-b30c-a5d68ac0787e" action="then" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="8f73c023-655a-4c0c-83d3-ee25a0d94ab2" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Create line with new CID name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="a12c1b9a-c340-4b07-a272-e2961437b766" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_name_line &quot;CID Name=$cid_name&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="0190b215-7059-4ce4-a118-7ed24bef4fc5" action="else" useFieldsInCommand="false">
                                                                                                    <nestedSteps>
                                                                                                        <item guid="b1c1bb77-e6cd-4c68-94df-58c6edcdfde3" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>Grab line with existing CID number</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="5cd7c592-f0ca-453d-adce-880caa0b9cf4" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set cid_name_line [lindex $config_lines [expr $i + 2]]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="ae123eb9-5497-46af-b2ed-825bf9d89938" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Copy lines to new config variable</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="555d6e97-927b-436c-804b-759498d7c2c9" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set new_config &quot;$new_config$line\\n&quot;</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="b6d03fb3-989e-43c5-bff7-f8f61b7ef7f2" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set new_config &quot;$new_config$cid_number_line\\n&quot;</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="32a91e5d-9773-4b42-be42-92a2b1b45a48" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set new_config &quot;$new_config$cid_name_line\\n&quot;</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="06cd3e60-c485-4214-9909-a748445dda60" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Increment i to skip over these lines</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="bd32012e-aaa8-40ec-8167-5bc04c40934e" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set i [expr $i + 2]</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="a3c2e234-f058-4c47-bdcc-c964b048a68d" action="else" useFieldsInCommand="false">
                                                                    <nestedSteps>
                                                                        <item guid="9b49e7f7-9be4-45d2-90fb-3bc9e6bd1d1a" action="comment" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>If current line does not contain desired phone number copy line to new XML</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="161952a7-35f4-41d4-aad0-e0dba72fdc46" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>set new_config &quot;$new_config$line\\n&quot;</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="99110a5e-304b-41f9-9127-b0b0d565193a" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>puts $new_config</body>
                                            </command>
                                            <postProcessing>
                                                <storeResponseAt>new_xml</storeResponseAt>
                                                <storeResponseText>true</storeResponseText>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="35c85c44-496f-48d8-8ce6-a5959a35dbf2" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Commit changes</body>
                            </command>
                            <nestedSteps>
                                <item guid="5ea10a55-6425-4e87-9675-c13885c112e8" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts $new_config</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>new_xml</storeResponseAt>
                                        <storeResponseText>true</storeResponseText>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="3f723f94-e3a5-4097-ae99-e468f5602cf0" action="command" session="$session">
                                    <command>
                                        <body>epdb SetPhoneBookBySet &quot;EANALOG&quot; &quot;Subscriber&quot; &quot;1&quot; &quot;External&quot; {$new_config}</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>ext_status</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="912b5a9b-f9c4-4dc0-bb15-9017610cac65" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Determine status</body>
                    </command>
                    <nestedSteps>
                        <item guid="f07d82b7-4749-4e00-b950-7c11605e3362" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>puts &quot;$own_status $ext_status&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="0f11b4a9-db39-429e-96a4-f230f09bf009" action="if" useFieldsInCommand="false">
                            <command>
                                <body>($own_status == 1) &amp;&amp; ($ext_status == 1)</body>
                            </command>
                            <nestedSteps>
                                <item guid="20fa9818-9069-4682-8f76-f9673e935ad0" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="2b48771b-3c69-4068-b91a-5768bac104fa" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>puts 1</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>group1()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>var1</storageLocation>
                                                                <query>[return success]</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="70206334-74be-4cc0-bac0-85ab79963126" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="e389d600-bc17-4755-9c45-6084f75dee60" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>puts 0</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>group1()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>var1</storageLocation>
                                                                <query>[return success]</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Change the expected caller ID name and/or number in the active Abacus config.
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________

1. phone_num\t\t\t|   M   |   Phone number to change caller ID on
2. cid_number\t\t\t|   O   |   New expected caller ID phone number. Will not change existing config if not present. 
3. cid_name\t\t\t|   O   |   New expected caller ID name. Will not change existing config if not present. 

______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.</multilineDescription>
            <arguments>
                <item name="phone_num">
                    <description>Phone number to change caller ID on</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="cid_number">
                    <description> New expected caller ID phone number. Will not change existing config if not present. </description>
                </item>
                <item name="cid_name">
                    <description> New expected caller ID name. Will not change existing config if not present. </description>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="ChangeCircuits" isPublic="true" isVBlock="true">
            <description>Enable or Disable Abacus Circuits</description>
            <steps>
                <item guid="556212f2-96a5-4a1d-a928-a01f1f5bce2b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get current protocol selection config</body>
                    </command>
                    <nestedSteps>
                        <item guid="9b6a3c5a-01fa-4d6c-8150-3530aa535554" action="command" session="$session" useFieldsInCommand="false" skippReporting="false">
                            <command>
                                <body>ptl GetCurrentConfig</body>
                            </command>
                            <postProcessing>
                                <storeResponseAt>current_config</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="2f0080f4-a72f-4cd2-9617-3ac0ea5a290b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Disable all channels</body>
                    </command>
                    <nestedSteps>
                        <item guid="9fef89c3-7ddf-432e-98b9-b9dd330be9a8" action="for" useFieldsInCommand="false" skippReporting="false">
                            <command>
                                <body>{set channel 1} {$channel &lt; 100} {incr channel}</body>
                            </command>
                            <nestedSteps>
                                <item guid="6439807c-9960-456d-a2d6-cd6db3301b6e" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub &quot;&lt;circuit num=\\&quot;$channel\\&quot; enabled=\\&quot;true\\&quot;/&gt;&quot; $current_config &quot;&lt;circuit num=\\&quot;$channel\\&quot; enabled=\\&quot;false\\&quot;/&gt;&quot; current_config</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="687c73a3-f28d-424d-aa90-2cf6717fc856" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Enable all channels in enable list</body>
                    </command>
                    <nestedSteps>
                        <item guid="2ab4ad80-edf9-4202-a664-a2787ce288d8" action="foreach" useFieldsInCommand="false" skippReporting="false">
                            <command>
                                <body>channel $enable_list</body>
                            </command>
                            <nestedSteps>
                                <item guid="50166e91-6f16-42e8-94cd-bdba17a3cfe5" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub &quot;&lt;circuit num=\\&quot;$channel\\&quot; enabled=\\&quot;false\\&quot;/&gt;&quot; $current_config &quot;&lt;circuit num=\\&quot;$channel\\&quot; enabled=\\&quot;true\\&quot;/&gt;&quot; current_config</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3bc84d51-60f7-40a1-ab02-579184a7989d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Commit changes</body>
                    </command>
                    <nestedSteps>
                        <item guid="b7c1e4e4-8a89-4ccd-91d2-8ab7280b00cd" action="eval" useFieldsInCommand="false" skippReporting="false">
                            <command>
                                <body>puts $current_config</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b907cd5b-459d-4fd5-a3f1-7137f3a38214" action="command" session="$session">
                            <command>
                                <body>ptl SetCurrentConfig {$current_config}</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>var1</storageLocation>
                                                <query>[return success]</query>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Enable or disable circuits in a running Abacus config. Corresponds to config seen in the protocol selection window
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________
1. enable_list \t\t|   O   |   List of channel numbers to enable   

______________________________________________________
Response Structure\t\t|\tDescription    

none</multilineDescription>
            <arguments>
                <item name="enable_list">
                    <description>List of channels to enable</description>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="ChangeScript" isPublic="true" isVBlock="true">
            <description>Change the Script Used by an Active Abacus Environment File</description>
            <steps>
                <item guid="cd967780-c015-491d-941e-5accdc25ed9d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get current partition and timing config</body>
                    </command>
                    <nestedSteps>
                        <item guid="0f2dcedc-9dc7-4cbd-84c3-face9c32163e" action="command" session="$session" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                            <command>
                                <body>pnt GetCurrentConfig &quot;EANALOG&quot; &quot;Subscriber&quot;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Xml/set-list/set</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>xml_stripped</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>current_config</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b9a98f21-86df-4084-85c9-d644bd0c7f98" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Build new XML</body>
                    </command>
                    <nestedSteps>
                        <item guid="bf5c1e2b-8a77-407b-a0fa-4490f3f8083a" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Remove &lt;set-list&gt; lines to make new XML compatible with Abacus DatSet data holder</body>
                            </command>
                            <nestedSteps>
                                <item guid="e696f37b-c816-4c3b-a50c-7e98c843ffcd" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub -all {&lt;/?set-list[^&gt;]*&gt;} $current_config &quot;&quot; new_xml</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="9f294e90-a7e7-4bf1-a20f-dd1cb9c39106" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Replace the line with the current script with the new script</body>
                            </command>
                            <nestedSteps>
                                <item guid="a2101d3e-871c-4211-8db4-287bdf32edfe" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub {&lt;script-originate&gt;.*&lt;/script-originate&gt;} $new_xml &quot;&lt;script-originate&gt;$new_script&lt;/script-originate&gt;&quot; new_xml</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8def83a1-f910-4c9d-838a-5f288505811f" action="command" session="$session">
                    <command>
                        <body>datset ImportFromXMLString {$new_xml}</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>error</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set xml_success 0</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set xml_success 1</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="11d90320-feba-4865-8ba8-17cb0c0febf5" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Exit procedure if XML has errors</body>
                    </command>
                    <nestedSteps>
                        <item guid="f6448151-6720-462e-bfe0-d1a1c6bc53c1" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>puts $xml_success</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>var1</storageLocation>
                                                <query>[return success]</query>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>$value == 0</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="ExitProcedure">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b6983317-06d5-4913-b46a-aa475a9aed5e" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>pnt UpdateSet [datset ExportToXMLString]</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return success]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Public
Objective:  Change the call script used by the current Abacus config. 
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________

1. new_script\t\t\t|   M   |   IP of Abacus chassis to connect to.

______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.</multilineDescription>
            <arguments>
                <item name="new_script">
                    <description>Name of the script to change to as it appears in the Partition and Timing window on Abacus. </description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="ChangeLines" isPublic="true" isVBlock="true">
            <description>Change the Count and Configuration of the Active Abacus Environment File</description>
            <steps>
                <item guid="ad6b0b16-fa00-40a9-9acb-06c52458d4aa" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get current partition and timing config</body>
                    </command>
                    <nestedSteps>
                        <item guid="d4e7a7bf-26cd-48d9-921b-95aba341196f" action="command" session="$session" estimatedStepExecutionTime="0.001" useFieldsInCommand="false" skippReporting="false">
                            <command>
                                <body>pnt GetCurrentConfig &quot;EANALOG&quot; &quot;Subscriber&quot;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Xml/set-list/set</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>xml_stripped</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>current_config</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="66528244-0d6c-4fdf-9cae-3f1966c06f63" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Build new XML</body>
                    </command>
                    <nestedSteps>
                        <item guid="a2644793-a176-41af-8e46-03df584cf0f4" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Calculate total number of lines</body>
                            </command>
                            <nestedSteps>
                                <item guid="bcf1fa0b-a587-4eb6-8eea-4c65d9e376ea" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set total_lines [expr [expr $end_line_no - $start_line_no] + 1]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="2cc78276-03ea-46b3-9b27-df91b946c51c" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Remove &lt;set-list&gt; lines to make new XML compatible with Abacus DatSet data holder</body>
                            </command>
                            <nestedSteps>
                                <item guid="db2a87f1-1bba-418d-b8ee-1214082215fb" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub -all {&lt;/?set-list[^&gt;]*&gt;} $current_config &quot;&quot; new_xml</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="ebda6db2-0d99-481b-8969-bcdac1d5ce15" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Replace the lines with old line start, end, and total to new values</body>
                            </command>
                            <nestedSteps>
                                <item guid="797ab72c-b3cb-4660-bb81-c33a7ebe15fc" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub {&lt;from&gt;.*&lt;/from&gt;} $new_xml &quot;&lt;from&gt;$start_line_no&lt;/from&gt;&quot; new_xml</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="732ceadb-6ac2-4b26-beed-6f801122d4cb" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub {&lt;to&gt;.*&lt;/to&gt;} $new_xml &quot;&lt;to&gt;$end_line_no&lt;/to&gt;&quot; new_xml</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ac5717e8-1652-4da3-bb35-dd3e916e6a1a" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>regsub {&lt;total&gt;.*&lt;/total&gt;} $new_xml &quot;&lt;total&gt;$total_lines&lt;/total&gt;&quot; new_xml</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e2687b5b-fb8c-4bf6-af1b-2e1e38a33811" action="eval" useFieldsInCommand="false" skippReporting="false">
                                    <command>
                                        <body>puts $new_xml</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="a6b45c0d-30b3-4121-82e4-3d46ffff87d2" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>If new originate/terminate is set, change it</body>
                            </command>
                            <nestedSteps>
                                <item guid="e82e893a-e012-4325-8970-656478ca4bbb" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[info exists local otto_config] == 1</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="481e62cf-b535-4d7c-89ba-6d3830a46c02" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="ab9adf6b-46a3-4af4-a5b9-f9b668fd4458" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>regsub {&lt;configuration&gt;.*&lt;/configuration&gt;} $new_xml &quot;&lt;configuration&gt;$otto_config&lt;/configuration&gt;&quot; new_xml</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b8282615-180c-4a3c-b8d3-ed5e5ca43d50" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>If new phonebook is set, change it</body>
                            </command>
                            <nestedSteps>
                                <item guid="15ab3e1d-fb12-473a-a3ca-8dbab697280c" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>[info exists local phonebook] == 1</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="86ca4fb5-d58c-4928-a94f-a94d27602aa0" action="then" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="eccf8e3d-3148-4af3-a1b2-13a9c25031ee" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>regsub {&lt;links&gt;.*&lt;/links&gt;} $new_xml &quot;&lt;links&gt;$phonebook&lt;/links&gt;&quot; new_xml</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="dba963ac-1bd9-4db5-9080-f34d73cab2ac" action="command" session="$session">
                    <command>
                        <body>datset ImportFromXMLString {$new_xml}</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>error</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set xml_success 0</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set xml_success 1</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="48dc6a9c-b104-4251-9f8a-ebe650cfdf4a" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Exit procedure if XML has errors</body>
                    </command>
                    <nestedSteps>
                        <item guid="4866b84c-d3ee-49e1-b683-42a72b4ccdd8" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>puts $xml_success</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>var1</storageLocation>
                                                <query>[return success]</query>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>$value == 0</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="ExitProcedure">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="ea38b7ee-9ed3-4ab7-8bc6-e7979479e135" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>pnt UpdateSet [datset ExportToXMLString]</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return success]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Change which lines are used and optionally their O/T configuration and phone book. Corresponds to what is seen in the Association tab of the Partition and Timing window in the Abacus GUI.
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________

1. start_line_no\t\t\t|   M   |   Index of the line to start counting from. Corresponds to the &apos;From&apos; column. 
2. end_line_no\t\t\t|   M   |   Index of line to end on. Corresponds to the &apos;To&apos; column
3. otto_config\t\t\t|   O   |   Change which lines originiate and which lines terminate. Optional. Will not change existing config if not present. 
3. phonebook\t\t\t|   O   |   Use &quot;Own&quot; or &quot;External&quot; phonebook. Optional. Will only change existing config if argument is given

______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.</multilineDescription>
            <arguments>
                <item name="start_line_no">
                    <description> Index of the line to start counting from. Corresponds to the &apos;From&apos; column. </description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="end_line_no">
                    <description>Index of line to end on. Corresponds to the &apos;To&apos; column</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="otto_config">
                    <description>Change which lines originiate and which lines terminate. Optional. Will not change existing config if not present. 
Options are: ALL_ORIGINATE, ALL_TERMINATE, OTOT, and TOTO</description>
                </item>
                <item name="phonebook">
                    <description>Use &quot;Own&quot; or &quot;External&quot; phonebook. Optional. Will only change existing config if argument is given</description>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="DisableCallerID" isPublic="true" isVBlock="true">
            <description>Enable Caller ID</description>
            <steps>
                <item guid="bb88df0a-cf27-4a50-90b1-ef218e49fc3a" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get current protocol selection config</body>
                    </command>
                    <nestedSteps>
                        <item guid="3bdaf924-d13e-4ecf-90ff-cebdabd1709e" action="command" session="$session" estimatedStepExecutionTime="0.033" useFieldsInCommand="false">
                            <command>
                                <body>protocol GetCurrentConfig</body>
                            </command>
                            <postProcessing>
                                <storeResponseAt>current_config</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="95eb695d-4837-4644-8a0a-a6416dc6689c" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Replace protocol line with &quot;Loop Start&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="a0b39bf9-8e78-4932-9b1e-7e03bc115be6" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>regsub {&lt;protocol&gt;.*&lt;/protocol&gt;} $current_config &quot;&lt;protocol&gt;Loop Start&lt;/protocol&gt;&quot; new_xml</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="9b31ef99-2c0b-4b8a-bc95-ec368a0f8930" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Commit changes to Abacus session</body>
                    </command>
                    <nestedSteps>
                        <item guid="1e6e1739-1982-4028-a958-f2499da9b8c6" action="command" session="$session">
                            <command>
                                <body>ps_data ImportFromXMLString {$new_xml}</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>error</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>$value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>set xml_success 0</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>set xml_success 1</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="e8d9e261-c83c-401c-aa65-d87197cb7f78" action="command" session="$session" useFieldsInCommand="false">
                            <command>
                                <body>protocol SetCurrentConfig [ps_data ExportToXMLString]</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>var1</storageLocation>
                                                <query>[return success]</query>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <multilineDescription>Objective:  Enable Caller ID in Abacus (Changes protocol to &quot;Loop Start with CID&quot;)
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________

none
______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.</multilineDescription>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="Disconnect" isPublic="true">
            <description>Gracefilly Disconnect from Abacus Session</description>
            <steps>
                <item guid="e6a3a085-b711-4d67-8646-fcc8f273e114" action="command" session="$session">
                    <command>
                        <body>sysinfo RemoveConnection $chassis_ip</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="cf645ed0-b021-40f7-9b46-950949b7785c" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>app Exit</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Public
Objective:  Gracefully disconnec from an Abacus Tcl session
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________
1. chassis_ip\t\t|   M   |   IP of chassis to disconnect from</multilineDescription>
            <arguments>
                <item name="chassis_ip">
                    <description>IP of chassis to disconnect from</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="EnableCallerID" isPublic="true" isVBlock="true">
            <description>Enable Caller ID</description>
            <steps>
                <item guid="6d8d2e67-7f1e-4f86-b8e3-71ff8cc835ba" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get current protocol selection config</body>
                    </command>
                    <nestedSteps>
                        <item guid="77e026c4-b9c1-4fbe-b3dd-43517e143e09" action="command" session="$session" estimatedStepExecutionTime="0.033" useFieldsInCommand="false">
                            <command>
                                <body>protocol GetCurrentConfig</body>
                            </command>
                            <postProcessing>
                                <storeResponseAt>current_config</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="379aeb65-c261-4910-b4c6-a79d781b961d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Replace protocol line with &quot;Loop Start with CID&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="03d819d6-af96-4a0d-bf17-934361f1f1cf" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>regsub {&lt;protocol&gt;.*&lt;/protocol&gt;} $current_config &quot;&lt;protocol&gt;Loop Start with CID&lt;/protocol&gt;&quot; new_xml</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="cadddd93-e51e-45eb-ba74-cd677006692c" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Commit changes to Abacus session</body>
                    </command>
                    <nestedSteps>
                        <item guid="d0b41ef4-72b8-419c-afcf-9da17917f1e3" action="command" session="$session">
                            <command>
                                <body>ps_data ImportFromXMLString {$new_xml}</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>error</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>$value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>set xml_success 0</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>set xml_success 1</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="3ac557b4-f875-4aa9-bbf1-ca28dc00b16c" action="command" session="$session" useFieldsInCommand="false">
                            <command>
                                <body>protocol SetCurrentConfig [ps_data ExportToXMLString]</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>var1</storageLocation>
                                                <query>[return success]</query>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <multilineDescription>Objective:  Enable Caller ID in Abacus (Changes protocol to &quot;Loop Start with CID&quot;)
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________

none
______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.</multilineDescription>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="GetEvents" isPublic="true">
            <description>Get Execution Events from an Abacus Session</description>
            <steps>
                <item guid="7c789e4f-41c4-4354-b314-45aba2bbd602" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get number of events</body>
                    </command>
                    <nestedSteps>
                        <item guid="cede9a9c-c8ee-4562-8b76-c7cbd7423165" action="command" session="$session" useFieldsInCommand="false">
                            <command>
                                <body>results GetEventsCount</body>
                            </command>
                            <postProcessing>
                                <storeResponseAt>event_count</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <emulation emulate="ALWAYS"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d12d48c2-83c3-4ad8-9858-80e42640d025" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Grab channel, action, event, and comment for all but first and last events (First and last events are test start and test complete)</body>
                    </command>
                    <nestedSteps>
                        <item guid="23173566-f8f1-4e4b-93ff-05c3913c5de2" action="GetXmlReport" session="$session" useFieldsInCommand="false" skippReporting="false">
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                <query>mapped/Xml/report/gen-events/event[position() &gt; 1 and position() &lt;last()]/@channel</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>channel_list</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                <query>mapped/Xml/report/gen-events/event[position() &gt; 1 and position() &lt;last()]/@act</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>action_list</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                <query>mapped/Xml/report/gen-events/event[position() &gt; 1 and position() &lt;last()]/@event</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>event_list</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                <query>mapped/Xml/report/gen-events/event[position() &gt; 1 and position() &lt;last()]/@comment</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>comment_list</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="9d2043a9-8366-4f21-af55-3cd57a5b0034" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Change channel names to just numbers</body>
                    </command>
                    <nestedSteps>
                        <item guid="cb733a63-901d-4dad-865e-ea8dd3d0c085" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set i 0</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="7bf402f0-9a84-4468-9bdc-ee3c993a6d3a" action="foreach" useFieldsInCommand="false" skippReporting="false">
                            <command>
                                <body>channel $channel_list</body>
                            </command>
                            <nestedSteps>
                                <item guid="9bfac666-dd41-4a86-aac5-abe1980f2324" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>lset channel_list $i [string range $channel 7 end]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="36e8e68d-2421-44b7-a1ce-b3a08f219541" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>incr i</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e9c0c2fe-2253-4630-86b9-63ada42561bd" action="write">
                    <command>
                        <body>Action\\tChannel\\tEvent\\tComment</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8e050235-0ec3-4c3b-8e0e-ee66abd03749" action="for" useFieldsInCommand="false">
                    <command>
                        <body>{set i 0} {$i &lt; [expr $event_count -2]} {incr i}</body>
                    </command>
                    <nestedSteps>
                        <item guid="329d49c3-7c12-4e17-b7d8-4d6906549c8a" action="write">
                            <command>
                                <body>\\n[lindex $action_list $i]\\t[lindex $channel_list $i]\\t[lindex $event_list $i]\\t[lindex $comment_list $i]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <multilineDescription>Objective:  Get execution events from an Abacus session.

Notes: Strips the first and last events (test start and test complete) before passing them back. 
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________
None

______________________________________________________
Response : A tab-seperated table containing a description of the event and the channel associated with it. </multilineDescription>
            <response>{&quot;channel&quot;:&quot;value&quot;,&quot;message&quot;:&quot;value&quot;}</response>
        </item>
        <item name="GetQualityStats" isPublic="true">
            <description>Get Minimum PESQ Score Stats from Abacus after a Test Run</description>
            <steps>
                <item guid="76c516bb-8d8a-4a35-8df0-161a409ddb75" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get channel numbers and average PESQ scores for each channel </body>
                    </command>
                    <nestedSteps>
                        <item guid="ecf64cb2-2736-46b8-a5f5-4af5177eba8d" action="GetXmlReport" session="$session" useFieldsInCommand="false" skippReporting="false">
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                <query>mapped/Xml/report/channel-data/measurement-value-counts/vc-channels/vc-channel/value-counts[@msref=&quot;MES_PESQ&quot;]/vc-summary/@min</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>pesq_list</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Xml/report/channel-data/measurement-value-counts/vc-channels/vc-channel/@num</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>channel_list</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>xml_report</storeResponseAt>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <emulation emulate="ALWAYS" useExternalSource="false"/>
                        </item>
                        <item guid="f14cfe4b-df1e-45a8-858c-c2a9b4503ddf" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set adjusted_pesq_list {}</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="960c6281-1a98-4268-b6b5-430e30e93dbe" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>set i 0</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="c6942bf4-5493-4323-94c7-3694a06304cb" action="foreach" useFieldsInCommand="false">
                            <command>
                                <body>channel $channel_list </body>
                            </command>
                            <nestedSteps>
                                <item guid="c716f452-7808-43b8-9052-38a65589f4e6" action="eval" useFieldsInCommand="false" skippReporting="false">
                                    <command>
                                        <body>response xml_report</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query sub="true">mapped/Xml/report/channel-data/measurement-value-counts/vc-channels/vc-channel\\[@num=&quot;$channel&quot;\\]/value-counts/@msref</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>measurement_list</storageLocation>
                                                        <storeInAList>true</storeInAList>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="57fc97a6-c170-45b5-aca1-4d05345218b4" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>lsearch $measurement_list MES_PESQ</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="assert">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                        <expression>$value &gt;= 0</expression>
                                                        <actionsWhenTrue>
                                                            <item actionId="Eval">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                    <statement>lappend adjusted_pesq_list [lindex $pesq_list $i]</statement>
                                                                </actionProperties>
                                                            </item>
                                                            <item actionId="Eval">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                    <statement>incr i</statement>
                                                                </actionProperties>
                                                            </item>
                                                        </actionsWhenTrue>
                                                        <actionsWhenFalse>
                                                            <item actionId="Eval">
                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                    <statement>lappend adjusted_pesq_list &quot;n/a&quot;</statement>
                                                                </actionProperties>
                                                            </item>
                                                        </actionsWhenFalse>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b370f073-2252-40be-b62e-ee386c59e722" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Print table of values</body>
                    </command>
                    <nestedSteps>
                        <item guid="65c712a6-a7f6-4da4-b605-aecfd859b59d" action="write">
                            <command>
                                <body>Channel\\tPESQ</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="cfd39f1f-032d-4c70-9c90-2366927525e2" action="foreach" useFieldsInCommand="false">
                            <command>
                                <body>channel $channel_list pesq $adjusted_pesq_list</body>
                            </command>
                            <nestedSteps>
                                <item guid="185c0a0e-ac56-4a01-bb1e-321021ab5694" action="write">
                                    <command>
                                        <body>\\n$channel\\t$pesq</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Get min PESQ quality stats from the last abacus test run. Must be called after a test is completed.
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________
none

______________________________________________________
Response Structure\t\t|\tDescription    

Returns a table of minimum PESQ scores per channel
</multilineDescription>
            <response>{&quot;pesq&quot;:&quot;value&quot;,&quot;pes-mos-lqo&quot;:&quot;value&quot;,&quot;jmos&quot;:&quot;value&quot;}</response>
        </item>
        <item name="GetXmlReport" isPublic="true">
            <description>Download the XML report from an Abacus session</description>
            <steps>
                <item guid="74a1b352-90b2-4dbf-b25a-5f8646c25a8f" action="command" session="$session" useFieldsInCommand="false" skippReporting="false">
                    <command>
                        <body>rep Generate</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>result()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value eq &quot;OK&quot;</expression>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="b7768bf9-bc14-4101-98ac-f33234724804" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>regsub -all {\\\\} [file uritopath project://d_Abacus_tclsh/reports] &quot;/&quot; filepath</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="1e45bf95-aac2-457c-a1da-9218757c9756" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>regsub -all {\\s} $filepath &quot;%20&quot; filepath</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="281285fa-7dcc-4a50-a87a-046d8f73aa6c" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $filepath </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="c0633111-f17e-4c24-b71e-dbe3c8ab74ff" action="command" session="$session">
                    <command>
                        <body>rep Download {$filepath}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="d60f4450-404b-4ae1-8012-bc4b17c6e3dd" action="sleep">
                    <command>
                        <body>10</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="56e2a3a1-9a2c-4d59-a62e-1a1f7abae53d" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>file exists file:/$filepath/iTest_Analog_Base_001.xml</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenFalse>
                                            <item actionId="RepeatStep">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" delayBetweenRepeats="20.0"/>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="db8dfe0a-bf39-4424-b6f7-b2028a8f11a4" action="readFile" skippReporting="false">
                    <command>
                        <body>file:/$filepath/iTest_Analog_Base_001.xml</body>
                    </command>
                    <postProcessing>
                        <storeResponseAt>response</storeResponseAt>
                        <storeResponseText>true</storeResponseText>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ReadFilePropertyGroup"/>
                </item>
                <item guid="38e1e025-9d8d-4897-be81-60379a86607f" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>file delete file:/$filepath/iTest_Analog_Base_001.xml</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="0ee6fb8b-9603-441c-932e-6f83d1b8a1d3" action="return" skippReporting="false">
                    <command>
                        <body>$response</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Generate and download the XML report from an Abacus session.
Notes: XML report must be enabled in the Abacus environment file.
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________

1. download_path\t\t\t|   M   |  Path to download the file to
2. filename\t\t\t\t\t|   M   | File name used by Abacus environment file. Usually &lt;Nam of env file&gt;_001.xml.

______________________________________________________
Response: The contents of the report file</multilineDescription>
            <arguments>
                <item name="download_path">
                    <description>Path to download XML report to.
i.e. C:\\abacus_reports
</description>
                </item>
                <item name="filename">
                    <description>Name of file 
i.e. iTest_Analog_CallWaiting_001.xml</description>
                </item>
            </arguments>
        </item>
        <item name="RunTest" isPublic="true" isVBlock="true">
            <description>Run an Abacus Test Script</description>
            <steps>
                <item guid="d931a19b-4abc-4cfa-86c9-ace6abafcbd5" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set pass 1</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e1e5c04c-41f4-4a3c-94b3-76ae7af20347" action="command" session="$session" normalOffset="45.312" estimatedStepExecutionTime="6.329" useFieldsInCommand="false">
                    <command>
                        <body>test Start </body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>result()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == &quot;OK&quot;</expression>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg $value</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="26e55890-acc3-46a5-83dc-7a3650787f71" action="sleep">
                    <command>
                        <body>5</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="86fe178e-8745-4463-b0ca-d9031feace1a" action="command" session="$session" normalOffset="2.767" estimatedStepExecutionTime="0.282" useFieldsInCommand="false">
                    <command>
                        <body>test GetStatus </body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>env_status()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>($value eq &quot;RUNNING&quot;) || ($value eq &quot;DONE&quot;)</expression>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg $value</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="f47a0beb-5747-4291-a432-012bb4731239" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>If test has started successfully, run until it completes or timeout is reached</body>
                    </command>
                    <nestedSteps>
                        <item guid="94370de2-7019-4d0f-b393-79974c8f7d75" action="if" useFieldsInCommand="false">
                            <command>
                                <body>$pass == 1</body>
                            </command>
                            <nestedSteps>
                                <item guid="fd71bfcd-e923-4803-8226-38b6138eae57" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="08363a20-07ed-47af-b2d5-38659ca72f3a" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>Divide timeout by 10. Increase by 1 loop count if not divisible by 10.</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="76f1201d-b4aa-4d1a-8e20-56cc52a1fbbd" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>set timeout_div [expr $timeout / 10]</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="27cbfb74-5617-473b-a03f-29c365c16533" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>puts [expr $timeout_div % 10]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>group1()</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="assert">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                        <expression>$value != 0</expression>
                                                                        <actionsWhenTrue>
                                                                            <item actionId="Eval">
                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                    <statement>set timeout_div [expr $timeout_div + 1]</statement>
                                                                                </actionProperties>
                                                                            </item>
                                                                        </actionsWhenTrue>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="8218f8d2-6f10-42af-bed7-6faaef4f229f" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>{set i 0} {$i &lt; $timeout_div} {incr i}</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="de6a2049-4f63-47ef-b788-e617f93cf08a" action="sleep" async="true" threadName="sleep" skippReporting="false">
                                                    <command>
                                                        <body>10</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="04290d23-87dc-467d-a213-e1c9996ac4e3" action="command" session="$session" normalOffset="2.767" estimatedStepExecutionTime="0.282" useFieldsInCommand="false" skippReporting="false">
                                                    <command>
                                                        <body>test GetStatus </body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>env_status()</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="assert">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                        <expression>$value eq &quot;RUNNING&quot;</expression>
                                                                        <actionsWhenTrue>
                                                                            <item actionId="SkipRemainingRules">
                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </item>
                                                                        </actionsWhenTrue>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>env_status()</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="assert">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                        <expression>$value eq &quot;DONE&quot;</expression>
                                                                        <actionsWhenTrue>
                                                                            <item actionId="Break">
                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </item>
                                                                            <item actionId="SkipRemainingRules">
                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </item>
                                                                        </actionsWhenTrue>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="none">
                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="assert">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                        <expression>1</expression>
                                                                        <actionsWhenTrue>
                                                                            <item actionId="Eval">
                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                    <statement>set pass 0</statement>
                                                                                </actionProperties>
                                                                            </item>
                                                                            <item actionId="Eval">
                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                                                    <statement>lappend failMsg &quot;Test Status not \\&quot;RUNNING\\&quot; or \\&quot;DONE\\&quot;.&quot;</statement>
                                                                                </actionProperties>
                                                                            </item>
                                                                            <item actionId="Break">
                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </item>
                                                                        </actionsWhenTrue>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <emulation emulate="ALWAYS"/>
                                                </item>
                                                <item guid="419cf6c4-3c1d-4563-b0bc-a746a5585bf1" action="waitthread">
                                                    <command>
                                                        <body>sleep</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.kernel.WaitThreadPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="c7ecd87e-21b2-45cb-822e-db960dd2fb04" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>$i &gt;= $timeout_div</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="b75a3150-a907-4eb7-a587-97b6233717b8" action="then" useFieldsInCommand="false">
                                                    <nestedSteps>
                                                        <item guid="d94c87c1-2d8a-44d6-ab14-0efa12e18e4c" action="StopTest" session="$session" useFieldsInCommand="false">
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="5ea8d4b4-ea12-40d8-bb5d-000a1b2dff76" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>set pass 0</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="93b31eb9-23a5-43d6-8462-ffe4b1202a1c" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>lappend failMsg &quot;Abacus script timeout of $timeout seconds exceeded.&quot;</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="7a41a6df-d51c-43f5-a486-1fb6ec25f807" action="else" useFieldsInCommand="false">
                                                    <nestedSteps>
                                                        <item guid="6e09627d-8af2-4d43-84d5-1d330f2cced2" action="comment" useFieldsInCommand="false">
                                                            <command>
                                                                <body>Insert steps here for when the expression evaluates to false</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e7f0405c-e7e7-446b-8a14-d502a15a0b64" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $pass</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return success]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="ExitProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="4fd11ff8-8e33-4138-aa5a-9dc0874b3282" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $failMsg</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup">
                                        <regex>.*</regex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return error_message]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Start an Abacus test script and wait for it to complete. Should only be used with Abacus scripts with a definite end. Returns a block response.
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________
1. timeout\t\t|   O   |   Time in seconds to wait for script to finish. Defaults to 300. 

______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.
2. error_message\t\t|\tReturns a string of error messages on failure, blank on success.</multilineDescription>
            <arguments>
                <item name="timeout">
                    <description>Time in seconds to wait for script to finish. Defaults to 300. </description>
                    <defaultValue>300</defaultValue>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;,&quot;error_message&quot;:&quot;value&quot;}</response>
        </item>
        <item name="SetPhoneBook" isPublic="true" isVBlock="true">
            <steps>
                <item guid="c2904c0b-ca68-42d9-afca-1623a353699e" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Set &quot;Own&quot; Phonebook</body>
                    </command>
                    <nestedSteps>
                        <item guid="b414b2b7-da3e-41a1-8930-1406ea3b1efb" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Build &quot;Own&quot; phonebook</body>
                            </command>
                            <nestedSteps>
                                <item guid="3c134aad-f7c5-4394-b7ff-73aa92b441a9" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set own_phonebook &quot;&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="bed89627-2bc6-40db-b1e6-6e41ff223e0a" action="for" useFieldsInCommand="false" skippReporting="false">
                                    <command>
                                        <body>{set i 0} {$i &lt; [llength $num_list]} {incr i}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="a2e42867-769c-46ab-9a87-ee7b83b67f33" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>[string index [lindex $num_list $i] 0] == 1</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="84eb422c-8fd8-4589-941f-e0f8e5115663" action="then" useFieldsInCommand="false">
                                                    <nestedSteps>
                                                        <item guid="d86bf23b-da8e-423b-b700-8e83463a894f" action="comment" useFieldsInCommand="false">
                                                            <command>
                                                                <body>If current phone number starts with a 1, strip it for CID</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="524dff7b-515c-4b8e-81b3-d221e3dbc2ca" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>set cid_num [string range [lindex $num_list $i] 1 end] </body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="3d36da77-6507-446b-92e7-c3ef0faf1205" action="else" useFieldsInCommand="false">
                                                    <nestedSteps>
                                                        <item guid="e03eb93a-57db-477c-ace4-a2c58a483884" action="comment" useFieldsInCommand="false">
                                                            <command>
                                                                <body>If current number does not start with a 1, leave it alone</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="8cf4aee1-e87f-457c-9ceb-aee9d4df429a" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>set cid_num [lindex $num_list $i]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="11f7421b-735b-49d2-a73d-b62a6c47ab90" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set own_phonebook &quot;$own_phonebook\\[[expr $i + 1]\\]\\nPhone=[lindex $num_list $i]\\nCID Phone=${cid_num}|\\nCID Name=Line [expr $i + 1]\\n\\n&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="e2bbcdc8-17fb-4db6-9969-432037049dcf" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Commit changes</body>
                            </command>
                            <nestedSteps>
                                <item guid="ef7a06c2-f346-4b16-8758-ec1d7ed865c1" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts $own_phonebook</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c81135f2-5a9c-4a9f-9483-396a46b77bb7" action="command" session="$session">
                                    <command>
                                        <body>epdb SetPhoneBookBySet &quot;EANALOG&quot; &quot;Subscriber&quot; &quot;1&quot; &quot;Own&quot; {$own_phonebook}</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>own_status</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="377d4e8e-feea-4add-9679-c083055c9631" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Set &quot;External&quot; Phonebook</body>
                    </command>
                    <nestedSteps>
                        <item guid="eedc3f25-36be-4288-8a8f-8ba250c588c7" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Build &quot;External&quot; Phonebook</body>
                            </command>
                            <nestedSteps>
                                <item guid="363060e8-a322-4410-87c8-c4c0b0343087" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set ext_phonebook &quot;&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="cff11d79-0cef-4ece-b31c-249b19b021c9" action="for" useFieldsInCommand="false" skippReporting="false">
                                    <command>
                                        <body>{set i 1} {$i &lt; [llength $num_list]} {incr i}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="667c40fb-fe2e-4f02-a938-e6a1afd4e8d4" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set ext_phonebook &quot;$ext_phonebook\\[$i\\]\\nPhone=[lindex $num_list $i]\\nCID Phone=[lindex $num_list $i]\\nCID Name=Line $i\\n\\n&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c5385afd-e2f4-40ad-8017-bdfdfaca8f49" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set ext_phonebook &quot;$ext_phonebook\\[$i\\]\\nPhone=[expr [lindex $num_list end] +1]\\nCID Phone=[expr [lindex $num_list end] + 1]\\nCID Name=Line $i\\n\\n&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="697cf3fe-57ba-4207-8d78-209fe9acae09" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Commit changes</body>
                            </command>
                            <nestedSteps>
                                <item guid="a6300c0c-fe7e-4d08-b714-ec1117ec57b8" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts $ext_phonebook</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ec9c3ea4-478e-459b-ab5c-461030a41c0a" action="command" session="$session">
                                    <command>
                                        <body>epdb SetPhoneBookBySet &quot;EANALOG&quot; &quot;Subscriber&quot; &quot;1&quot; &quot;External&quot; {$ext_phonebook}</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>ext_status</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="fd811efe-662b-4412-a408-14156f702f21" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Determine status</body>
                    </command>
                    <nestedSteps>
                        <item guid="24174d36-9f73-413d-9de5-aab083a1781d" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>puts &quot;$own_status $ext_status&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="976436d1-e2c4-4074-a564-e8408ede821b" action="if" useFieldsInCommand="false">
                            <command>
                                <body>($own_status == 1) &amp;&amp; ($ext_status == 1)</body>
                            </command>
                            <nestedSteps>
                                <item guid="1442b7b8-6375-4c59-9e91-9131feda84c4" action="then" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="df17f03f-44c5-4de3-8429-21e34aa5e0c7" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>puts 1</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>group1()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>var1</storageLocation>
                                                                <query>[return success]</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7f7442db-4db5-4d3c-9d0a-ebf393c29fab" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="cb5a3dad-b1f1-4d68-89d2-2869f2a37acf" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>puts 0</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>group1()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>var1</storageLocation>
                                                                <query>[return success]</query>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="num_list">
                    <description>List of phone numbers in order to be applied to phonebook.
</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="SetPhoneBookExternal" isPublic="true" isVBlock="true">
            <steps>
                <item guid="c78237a5-aafe-4afd-b0cd-f09ec2b66fd9" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Set &quot;External&quot; Phonebook</body>
                    </command>
                    <nestedSteps>
                        <item guid="5a83b782-4023-4f26-b4ca-1e8ac909f4ac" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Build external phonebook</body>
                            </command>
                            <nestedSteps>
                                <item guid="57816d3f-4e52-4df4-9bc6-46f626647821" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>set phonebook &quot;&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="8e5e891a-e4c7-4532-9c7b-a3b11b00a790" action="for" useFieldsInCommand="false" skippReporting="false">
                                    <command>
                                        <body>{set i 0} {$i &lt; [llength $num_list]} {incr i}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="e1e00631-792d-4c14-b869-0f89fc03eafb" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>set phonebook &quot;$phonebook\\[[expr $i + 1]\\]\\nPhone=[lindex $num_list $i]\\nCID Phone=[lindex $num_list $i]\\nCID Name=Line [expr $i + 1]\\n\\n&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="0807dabb-ee2d-48d3-9b78-1c1161da6bf1" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Commit changes</body>
                            </command>
                            <nestedSteps>
                                <item guid="0526aa3f-8330-43e3-9a28-5a878a8b8704" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>puts $phonebook</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="458440f0-6eb6-44e0-8035-66514d6b7cca" action="command" session="$session">
                                    <command>
                                        <body>epdb SetPhoneBookBySet &quot;EANALOG&quot; &quot;Subscriber&quot; &quot;1&quot; &quot;External&quot; {$phonebook}</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>own_status</storageLocation>
                                                        <query>[return success]</query>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="num_list">
                    <description>List of phone numbers in order to be applied to phonebook.
</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="SetThreshold" isPublic="true" isVBlock="true">
            <description>Set Threshold</description>
            <steps>
                <item guid="a9d23e3f-c7ce-4115-9df6-8a8e5b71aa2e" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>aba::ApiThresholdsErrors thresholds</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="dc0e2c5c-c25a-41c3-81cf-d6665b7dca78" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>thresholds GetCurrentConfig</body>
                    </command>
                    <postProcessing>
                        <storeResponseAt>thresh_config</storeResponseAt>
                        <storeResponseText>true</storeResponseText>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="44c380cf-51b5-4cc1-ab22-9e06003c9eaf" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>regsub -all {&lt;error-response error-condition=&quot;$\\{error_condition\\}&quot; threshold=&quot;(\\d*\\.?\\d*)&quot; error-reaction=&quot;.*&quot;} $thresh_config &quot;&lt;error-response error-condition=\\&quot;$error_condition\\&quot; threshold=\\&quot;$new_threshold\\&quot; error-reaction=\\&quot;$new_error_reaction\\&quot;&quot; new_xml</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d353f302-ed9c-477b-9108-e9ad75fd2ce3" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $new_xml</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="fd6dbe05-44b5-4642-9d5a-479917ad8fa9" action="command" session="$session" skip="true">
                    <command>
                        <body>thresholds SetCurrentConfig {$new_xml}</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return success]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Change a threshold and reaction in the Abacus Thresholds and Errors config</multilineDescription>
            <arguments>
                <item name="error_condition">
                    <description>Name of the error condition to change as named in the XML config. 
Example: ERR_NO_ANSWER</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="new_threshold">
                    <description>New threshold to set in seconds</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="new_error_reaction">
                    <description>New reaction to take when threshold is met. Examples:
No Reaction
Freeze
Stop script and test</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;}</response>
        </item>
        <item name="StartTest" isPublic="true" isVBlock="true">
            <description>Start an Abacus Test Script</description>
            <steps>
                <item guid="f57020f4-c1a7-4ab7-99f9-ce5d1582ce81" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set pass 1</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="7051a929-5c52-4420-b3f2-e7692556ced8" action="command" session="$session" normalOffset="45.312" estimatedStepExecutionTime="6.329" useFieldsInCommand="false">
                    <command>
                        <body>test Start </body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>result()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == &quot;OK&quot;</expression>
                                        <actionsWhenTrue>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg $value</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="1a1a6c03-35bd-4d0b-bafa-1d80aacb0804" action="sleep">
                    <command>
                        <body>5</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e8c9fb6f-4faa-43b1-bf65-4bbbe220beea" action="command" session="$session" normalOffset="2.767" estimatedStepExecutionTime="0.282" useFieldsInCommand="false">
                    <command>
                        <body>test GetStatus </body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>env_status()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value eq &quot;RUNNING&quot;</expression>
                                        <actionsWhenTrue>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg $value</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="49ecf8c6-ec4d-4f5a-af40-532661032a49" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $pass</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return success]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>group1()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="ExitProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="51356f59-217a-4688-9ef7-70743fd64714" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $failMsg</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup">
                                        <regex>.*</regex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return error_message]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Start an Abacus test script without waiting for it to complete.
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________


______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.
2. error_message\t\t|\tReturns a string of error messages on failure, blank on success.</multilineDescription>
            <response>{&quot;success&quot;:&quot;value&quot;,&quot;error_message&quot;:&quot;value&quot;}</response>
        </item>
        <item name="StopTest" isPublic="true">
            <description>Stop a Running Abacus Test</description>
            <steps>
                <item guid="9ff04d55-40f9-43f5-bd0b-e88f6b93cc36" action="command" session="$session" normalOffset="6.907" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>test StopNow</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="eeb71b01-3425-4a58-86e4-d273407afe21" action="command" session="$session" normalOffset="3.531" estimatedStepExecutionTime="0.282" useFieldsInCommand="false">
                    <command>
                        <body>test GetStatus </body>
                    </command>
                    <eventHandlers>
                        <item name="OnMappingFail">
                            <item actionId="FailTest">
                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </item>
                        </item>
                        <item name="OnResponseMappingIssue"/>
                    </eventHandlers>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Stop a running Abacus test.</multilineDescription>
        </item>
        <item name="TestSetup" isPublic="true" isVBlock="true">
            <description>Setup an Abacus Tcl session by loading libraries and perparing namespaces.</description>
            <steps>
                <item guid="92fb24df-1c51-4f26-8b69-0642023ad38c" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>set pass 1</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="16a7e7df-1e83-4b98-bcea-dce5a62e554e" action="command" session="$session" normalOffset="16.692" estimatedStepExecutionTime="0.126">
                    <command>
                        <body>lappend auto_path &quot;C:/Abacus 5000/[param abacus_version]/TCL/APIClasses&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="661f1fd7-0b0b-4598-bbe2-85101783661a" action="command" session="$session" normalOffset="4.233" estimatedStepExecutionTime="0.267" useFieldsInCommand="false">
                    <command>
                        <body>package require tdom </body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>can&apos;t find package tdom</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 0</expression>
                                        <actionsWhenTrue>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg &quot;Tcl Lib error: can&apos;t find package tdom&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="e25bc900-c3f9-4088-9590-e0d45d2191cd" action="command" session="$session" normalOffset="4.765" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>package require Itcl</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>can&apos;t find package Itcl</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 0</expression>
                                        <actionsWhenTrue>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg &quot;Tcl Lib error: can&apos;t find package Itcl&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="7942a259-803e-4dd0-8138-89de2f6d2882" action="command" session="$session" normalOffset="5.317" estimatedStepExecutionTime="0.954" useFieldsInCommand="false">
                    <command>
                        <body>package require tclreadyapi</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>can&apos;t find package tclreadyapi</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 0</expression>
                                        <actionsWhenTrue>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg &quot;Tcl Lib error: can&apos;t find package tclreadyapi&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="af838d73-9008-428d-ac95-d1c2656714ac" action="command" session="$session" normalOffset="123.797" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiApplication app</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="ff74fda6-d64b-468c-8a68-3aa18cdc901e" action="command" session="$session" normalOffset="24.706" estimatedStepExecutionTime="26.251">
                    <command>
                        <body>app Enter $automation_server</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>result()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>[regexp sock(\\\\d+) $value]</expression>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg &quot;Error creating socket. Check that Abacus automation server is running.&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="e1a04913-99c4-4426-9f33-84fa26d55286" action="command" session="$session" normalOffset="37.89" estimatedStepExecutionTime="62.72">
                    <command>
                        <body>app Load $env_file</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>result()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value eq &quot;OK&quot;</expression>
                                        <actionsWhenTrue>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg &quot;Can&apos;t load environment file. Check parameters and environment folder on Abacus automation server.&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="dab57af2-24a6-4a04-bff3-f80327125a9e" action="command" session="$session" normalOffset="13.328" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiSystemInformation sysinfo</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="86bd2f8e-e530-4be0-8cd5-3f51e1dc62bf" action="command" session="$session" normalOffset="23.25" estimatedStepExecutionTime="0.844">
                    <command>
                        <body>sysinfo SetConnection $chassis_ip $password</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>result()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set pass 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>lappend failMsg &quot;Cannot connect to chassis $chassis_ip.&quot;</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="8e57ff31-9cfd-43be-967e-a06954f0f2a7" action="command" session="$session" normalOffset="8.969" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiTest test</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="6b2d83b1-d4ff-4fbd-80e1-8fdc9a1133f0" action="command" session="$session" normalOffset="11.889" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiResults results</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="b4c110a2-1822-4633-b426-5989d5c6caf2" action="command" session="$session" normalOffset="5.581" estimatedStepExecutionTime="0.11" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiReports rep</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="2f606c99-1797-458a-9eea-60b4f4cf6fae" action="command" session="$session" normalOffset="41.234" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiTest start </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="3183e4e9-d0d6-406c-9735-58222fd17194" action="command" session="$session" normalOffset="19.017" estimatedStepExecutionTime="0.017" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiTest GetStatus </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation emulate="ALWAYS"/>
                </item>
                <item guid="e1f6b0b1-f28a-4ae5-b90b-cf0ee0eee92a" action="command" session="$session" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiPnT pnt</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="cf2f2a32-4863-4f96-b02a-933e8a3be9ed" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>::aba::DatSetlist setlist</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d91d516f-744a-4691-8895-b685d332df22" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>::aba::DatSet datset</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="15140e87-9eec-4a86-88e8-b770f3a831b6" action="command" session="$session" estimatedStepExecutionTime="0.001" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiProtocolSelection protocol</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="4a3cdba5-c2be-4a57-900f-c0e9f7777617" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>::aba::DatProtocolselection ps_data</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b8281e6a-ca18-465e-9cfd-86d3efe01a5c" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiEPDB epdb</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="cd8f3209-9d4d-45e1-abde-38542fde2be7" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>::aba::DatEPConfig4Set epcfg</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="5db66c82-971f-4d36-8b67-8081901a794c" action="command" session="$session" useFieldsInCommand="false">
                    <command>
                        <body>::aba::ApiProtocolSelection ptl</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8e960b0d-3890-4d61-917a-c6ea95f2e4b3" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $pass</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup">
                                        <regex>\\d+</regex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return success]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup">
                                        <regex>.*</regex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="ExitProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="325fc237-297b-41c8-a528-6cf21236309a" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>puts $failMsg</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup">
                                        <regex>.*</regex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>var1</storageLocation>
                                        <query>[return error_message]</query>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">true</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <author>Alex Orr</author>
            <version>1.0</version>
            <multilineDescription>Objective:  Connect to Abacus chassis through a running instance of Abacus Automation Server, load environment file and create needed namespaces. Returns a block structure.
______________________________________________________
Arguments      | O/M |   Description                
______________________________________________________

1. chassis_ip\t\t\t|   M   |   IP of Abacus chassis to connect to.
2. automation_server\t|   M   |   IP of running Abacus automation server.
3. env_file\t\t\t\t|   M   |   Name of environment file to load. Must exist in the default Abacus environment folder on the automation server.
4. password\t\t\t\t|   O   |   Password used to connect to Abacus chassis. Defaults to use no password.

______________________________________________________
Response Structure\t\t|\tDescription    
______________________________________________________
1. success\t\t\t\t|\tReturns a &quot;1&quot; for success, &quot;0&quot; for failure.
2. error_message\t\t|\tReturns a string of error messages on failure, blank on success.</multilineDescription>
            <arguments>
                <item name="chassis_ip">
                    <description>IP Address of Abacus chassis to connect to
</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="automation_server">
                    <description>IP address where Abacus Automation Server is running</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="env_file">
                    <description>Name of environment file to load. Must be in the default Abacus environment folder on the automation server.</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="password">
                    <description>Password used to connect to Abacus chassis. Blank by default. </description>
                    <defaultValue>&quot;&quot;</defaultValue>
                </item>
            </arguments>
            <response>{&quot;success&quot;:&quot;value&quot;,&quot;error_message&quot;:&quot;value&quot;}</response>
        </item>
    </procedures>
</testCase>
